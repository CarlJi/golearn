
## 为什么要谈这个topic？
实践中的质量保障，大家基本的方向一般都是
质量保障体系的建设，其主要目标就是针对目标业务不断增加测试覆盖，同时还要尽可能的提高人效。构建全链路质量卡点基本要从以下几点出发:

* 保障基础代码质量
* 构建业务测试覆盖
* 增加质量监测环节
* 普及与改进流程规范

而保障基础代码质量环节发力于链路之始，做的好的话，会发现真正是小投入大产出。

好的代码会问题较少，出事故的风险也降低。有一个经典的图来描述代码质量的好坏，当能深切表达程序员的内心:
WHAT THE FUCKS

相信绝大部分程序员都有追求高质量代码的内心，那如何才是高质量的代码呢？业界有一些比较约定俗成的说法，相比大家都有所了解，这里不一一介绍。如果想知道的，还可以看基本书：xxx。

保障基础代码质量可以光靠人一定不全面，需要一种自动化的机制来衡量？而自动化的好处就是能够降低心智负担，当你定义清楚一种规则时，收获就是一直的。

是人都可能会错误，可能会疏忽，所以我们需要一直工具来自动检测。而在业界此类工具就叫linter，不同的语言有不同的时候。那针对go语言有哪些呢？

再介绍之前，我们先看看几个经典的代码怀味道:

会怎样？功能是没问题的，但是如果for 循环执行1000此会怎样？


句柄泄露了。

ok，那我们关闭句柄，如下：

执行起来好像也没有问题，但是考虑一种场景，百度挂了，解析不了了。程序会怎样？
xxx

可以看到程序panic。出错之后，我们看的很明显，是因为出错时，res等于nil了。这种小问题，一般正向不出问题，但是确都是不严谨的。

所以go实现了go vet，能方便的检测到这种问题。关于Client.Do 具体的各种限制，大家可以参考这里: xxx

如果测试同学大家说使用框架，没遇到这个问题，那我们再看一个场景：
xxx

我看到了太多的这种错误。在我初次写go代码时，也曾经犯过类似错误。

举一些常见的代码怀味道的例子，说明静态分析工具的作用。


## 如何才能做好？

上面我们说go vet， 其原理时：xxx， 除此之外还有很多:
go fmt, 
go lint

等等。

但是用的多，大家可能会发现，有很多不精确的。

找标杆。

业界上有很多酷炫的比如：
360goreport
gometalinter 
golang-ci 
goreportcard


## 如何才能落地？
落地姿势， 一定要加到持续集成体系中，并且最好能量化，这样才好提高。

目前github有很多集成系统这方面做的很好，比如:
travis
circle CI

而著名的kubernetes系统的PROW，也做的非常强大。

在七牛，我们内部有实现一个spock hook job，通过UI配置，降低使用负担，体验非常不错。

看看目前针对GO语言，业界有哪些工具？

谈代码质量还需要向开源看齐，以kubernetes为例。

观点： 基于PR是我非常看好的方向，这是天然调动所有研发力量的契合点。(github ops?)

## 未来？

高质量的代码是业务质量保障的基础。这是个工程问题，同时也应该是企业文化问题，当大家都开始注重技术，注重代码质量，自然会朝着精益求精的路上。视糟糕的代码为仇寇。

我老板经常说，要做就做Number One，业界要像标杆企业看齐。比如Google，Facebook，Netflix。都大家都非常注重自己代码质量时，大家就都是工程师了，用技术来解决系统性问题。

## Contact me ?

Email: jinsdu@outlook.com

Blog: <http://www.cnblogs.com/jinsdu/>

Github: <https://github.com/CarlJi>
